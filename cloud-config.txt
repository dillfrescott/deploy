#cloud-config
package_update: true
package_upgrade: true
package_reboot_if_required: true

packages:
  - libsdl2-2.0-0
  - unattended-upgrades
  - wget
  - unzip
  - tzdata
  - apt-utils # Good practice for unattended installs
  - ca-certificates # Ensure wget/curl work reliably with HTTPS

# Define environment variables available to runcmd commands
environment:
  NZP_RCON_PASSWORD: 'your_super_secret_password_here' # <-- SET YOUR RCON PASSWORD HERE

runcmd:
  # Download the script from GitHub and execute it with bash
  # The environment variable NZP_RCON_PASSWORD will be available to the script
  - curl -sSL https://raw.githubusercontent.com/dillfrescott/deploy/refs/heads/main/deploynzp.sh | bash -s

# Optional: Final message (useful for debugging cloud-init logs)
final_message: "Cloud-init finished. NZP server setup script executed."
